<div class="container">
  <mat-toolbar>
    <span>Log in</span>
  </mat-toolbar>
  <mat-card class="my-card">
    <mat-card-content>
      <div *ngIf="loading" class="overlay-spinner">
        <mat-progress-spinner diameter="20"
                              class="spinner"
                              color="primary"
                              mode="indeterminate"
        >
        </mat-progress-spinner>
      </div>
      <div class="mat-error" *ngIf="showErrorMessage">
        Please check your credentials.
      </div>
      <form class="my-form">
        <mat-form-field class="full-width" floatLabel="always" appearance="outline">
          <mat-label>Username</mat-label>
          <input name="username" matInput [(ngModel)]="userDetails.username" required
                 #username="ngModel">
          <mat-error *ngIf="username.invalid">
            This field is required
          </mat-error>
        </mat-form-field>
        <mat-form-field class="full-width" floatLabel="always" appearance="outline">
          <mat-label>Password</mat-label>
          <input type="password" matInput name="password" [(ngModel)]="userDetails.password" required minlength="5"
                 #password="ngModel">
          <mat-error *ngIf="password.invalid && userDetails.password.length >= 6">
            This field is required
          </mat-error>
          <mat-error *ngIf="password.invalid && userDetails.password.length < 6">
            Min length is 6
          </mat-error>
        </mat-form-field>
      </form>
    </mat-card-content>
    <mat-card-actions style="display:flex;justify-content: space-evenly">
      <button mat-raised-button (click)="login()" color="accent"
              disabled="{{!(username.valid && password.valid)}}">Log in
      </button>
      <a mat-raised-button color="accent" routerLink="/signup">Register</a>
    </mat-card-actions>
  </mat-card>
</div>
